import _objectWithoutProperties from"/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js";import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import React from"c:\\node_modules\\react\\index.js";import ReactDOM from"c:\\node_modules\\react-dom\\index.js";import PropTypes from"c:\\node_modules\\prop-types\\index.js";import{getThemeProps,useTheme}from"c:\\node_modules\\@material-ui\\styles\\esm\\index.js";import{elementAcceptingRef,HTMLElementType}from"c:\\node_modules\\@material-ui\\utils\\esm\\index.js";import deprecatedPropType from"/node_modules/@material-ui/core/esm/utils/deprecatedPropType.js";import ownerDocument from"/node_modules/@material-ui/core/esm/utils/ownerDocument.js";import Portal from"c:\\node_modules\\@material-ui\\core\\esm\\Portal\\index.js";import createChainedFunction from"/node_modules/@material-ui/core/esm/utils/createChainedFunction.js";import useForkRef from"/node_modules/@material-ui/core/esm/utils/useForkRef.js";import useEventCallback from"/node_modules/@material-ui/core/esm/utils/useEventCallback.js";import zIndex from"/node_modules/@material-ui/core/esm/styles/zIndex.js";import ModalManager,{ariaHidden}from"/node_modules/@material-ui/core/esm/Modal/ModalManager.js";import TrapFocus from"c:\\node_modules\\@material-ui\\core\\esm\\Unstable_TrapFocus\\index.js";import SimpleBackdrop from"/node_modules/@material-ui/core/esm/Modal/SimpleBackdrop.js";function getContainer(container){return container="function"==typeof container?container():container,ReactDOM.findDOMNode(container)}function getHasTransition(props){return!!props.children&&props.children.props.hasOwnProperty("in")}var defaultManager=new ModalManager;export var styles=function styles(theme){return{root:{position:"fixed",zIndex:theme.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}};var Modal=React.forwardRef(function Modal(inProps,ref){var theme=useTheme(),props=getThemeProps({name:"MuiModal",props:_extends({},inProps),theme:theme}),_props$BackdropCompon=props.BackdropComponent,BackdropComponent=void 0===_props$BackdropCompon?SimpleBackdrop:_props$BackdropCompon,BackdropProps=props.BackdropProps,children=props.children,_props$closeAfterTran=props.closeAfterTransition,closeAfterTransition=void 0!==_props$closeAfterTran&&_props$closeAfterTran,container=props.container,_props$disableAutoFoc=props.disableAutoFocus,disableAutoFocus=void 0!==_props$disableAutoFoc&&_props$disableAutoFoc,_props$disableBackdro=props.disableBackdropClick,disableBackdropClick=void 0!==_props$disableBackdro&&_props$disableBackdro,_props$disableEnforce=props.disableEnforceFocus,disableEnforceFocus=void 0!==_props$disableEnforce&&_props$disableEnforce,_props$disableEscapeK=props.disableEscapeKeyDown,disableEscapeKeyDown=void 0!==_props$disableEscapeK&&_props$disableEscapeK,_props$disablePortal=props.disablePortal,disablePortal=void 0!==_props$disablePortal&&_props$disablePortal,_props$disableRestore=props.disableRestoreFocus,disableRestoreFocus=void 0!==_props$disableRestore&&_props$disableRestore,_props$disableScrollL=props.disableScrollLock,disableScrollLock=void 0!==_props$disableScrollL&&_props$disableScrollL,_props$hideBackdrop=props.hideBackdrop,hideBackdrop=void 0!==_props$hideBackdrop&&_props$hideBackdrop,_props$keepMounted=props.keepMounted,keepMounted=void 0!==_props$keepMounted&&_props$keepMounted,_props$manager=props.manager,manager=void 0===_props$manager?defaultManager:_props$manager,onBackdropClick=props.onBackdropClick,onClose=props.onClose,onEscapeKeyDown=props.onEscapeKeyDown,onRendered=props.onRendered,open=props.open,other=_objectWithoutProperties(props,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),_React$useState=React.useState(!0),exited=_React$useState[0],setExited=_React$useState[1],modal=React.useRef({}),mountNodeRef=React.useRef(null),modalRef=React.useRef(null),handleRef=useForkRef(modalRef,ref),hasTransition=getHasTransition(props),getDoc=function getDoc(){return ownerDocument(mountNodeRef.current)},getModal=function getModal(){return modal.current.modalRef=modalRef.current,modal.current.mountNode=mountNodeRef.current,modal.current},handleMounted=function handleMounted(){manager.mount(getModal(),{disableScrollLock:disableScrollLock}),modalRef.current.scrollTop=0},handleOpen=useEventCallback(function(){var resolvedContainer=getContainer(container)||getDoc().body;manager.add(getModal(),resolvedContainer),modalRef.current&&handleMounted()}),isTopModal=React.useCallback(function(){return manager.isTopModal(getModal())},[manager]),handlePortalRef=useEventCallback(function(node){mountNodeRef.current=node,node&&(onRendered&&onRendered(),open&&isTopModal()?handleMounted():ariaHidden(modalRef.current,!0))}),handleClose=React.useCallback(function(){manager.remove(getModal())},[manager]);if(React.useEffect(function(){return function(){handleClose()}},[handleClose]),React.useEffect(function(){open?handleOpen():(!hasTransition||!closeAfterTransition)&&handleClose()},[open,handleClose,hasTransition,closeAfterTransition,handleOpen]),!keepMounted&&!open&&(!hasTransition||exited))return null;var handleEnter=function handleEnter(){setExited(!1)},handleExited=function handleExited(){setExited(!0),closeAfterTransition&&handleClose()},inlineStyle=styles(theme||{zIndex:zIndex}),childProps={};return void 0===children.props.tabIndex&&(childProps.tabIndex=children.props.tabIndex||"-1"),hasTransition&&(childProps.onEnter=createChainedFunction(handleEnter,children.props.onEnter),childProps.onExited=createChainedFunction(handleExited,children.props.onExited)),React.createElement(Portal,{ref:handlePortalRef,container:container,disablePortal:disablePortal},React.createElement("div",_extends({ref:handleRef,onKeyDown:function handleKeyDown(event){"Escape"===event.key&&isTopModal()&&(onEscapeKeyDown&&onEscapeKeyDown(event),!disableEscapeKeyDown&&(event.stopPropagation(),onClose&&onClose(event,"escapeKeyDown")))},role:"presentation"},other,{style:_extends({},inlineStyle.root,!open&&exited?inlineStyle.hidden:{},other.style)}),hideBackdrop?null:React.createElement(BackdropComponent,_extends({open:open,onClick:function handleBackdropClick(event){event.target!==event.currentTarget||(onBackdropClick&&onBackdropClick(event),!disableBackdropClick&&onClose&&onClose(event,"backdropClick"))}},BackdropProps)),React.createElement(TrapFocus,{disableEnforceFocus:disableEnforceFocus,disableAutoFocus:disableAutoFocus,disableRestoreFocus:disableRestoreFocus,getDoc:getDoc,isEnabled:isTopModal,open:open},React.cloneElement(children,childProps))))});void 0;export default Modal;