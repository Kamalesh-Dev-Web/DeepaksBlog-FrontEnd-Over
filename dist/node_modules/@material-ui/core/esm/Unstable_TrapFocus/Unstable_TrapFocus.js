import React from"c:\\node_modules\\react\\index.js";import ReactDOM from"c:\\node_modules\\react-dom\\index.js";import PropTypes from"c:\\node_modules\\prop-types\\index.js";import ownerDocument from"/node_modules/@material-ui/core/esm/utils/ownerDocument.js";import useForkRef from"/node_modules/@material-ui/core/esm/utils/useForkRef.js";import{exactProp}from"c:\\node_modules\\@material-ui\\utils\\esm\\index.js";function Unstable_TrapFocus(props){var children=props.children,_props$disableAutoFoc=props.disableAutoFocus,disableAutoFocus=void 0!==_props$disableAutoFoc&&_props$disableAutoFoc,_props$disableEnforce=props.disableEnforceFocus,disableEnforceFocus=void 0!==_props$disableEnforce&&_props$disableEnforce,_props$disableRestore=props.disableRestoreFocus,disableRestoreFocus=void 0!==_props$disableRestore&&_props$disableRestore,getDoc=props.getDoc,isEnabled=props.isEnabled,open=props.open,ignoreNextEnforceFocus=React.useRef(),sentinelStart=React.useRef(null),sentinelEnd=React.useRef(null),nodeToRestore=React.useRef(),rootRef=React.useRef(null),handleOwnRef=React.useCallback(function(instance){rootRef.current=ReactDOM.findDOMNode(instance)},[]),handleRef=useForkRef(children.ref,handleOwnRef),prevOpenRef=React.useRef();return React.useEffect(function(){prevOpenRef.current=open},[open]),!prevOpenRef.current&&open&&!0&&(nodeToRestore.current=getDoc().activeElement),React.useEffect(function(){if(open){var doc=ownerDocument(rootRef.current);disableAutoFocus||!rootRef.current||rootRef.current.contains(doc.activeElement)||(!rootRef.current.hasAttribute("tabIndex")&&rootRef.current.setAttribute("tabIndex",-1),rootRef.current.focus());var contain=function contain(){var rootElement=rootRef.current;return null===rootElement?void 0:!doc.hasFocus()||disableEnforceFocus||!isEnabled()||ignoreNextEnforceFocus.current?void(ignoreNextEnforceFocus.current=!1):void(rootRef.current&&!rootRef.current.contains(doc.activeElement)&&rootRef.current.focus())},loopFocus=function loopFocus(event){disableEnforceFocus||!isEnabled()||9!==event.keyCode||doc.activeElement===rootRef.current&&(ignoreNextEnforceFocus.current=!0,event.shiftKey?sentinelEnd.current.focus():sentinelStart.current.focus())};doc.addEventListener("focus",contain,!0),doc.addEventListener("keydown",loopFocus,!0);var interval=setInterval(function(){contain()},50);return function(){clearInterval(interval),doc.removeEventListener("focus",contain,!0),doc.removeEventListener("keydown",loopFocus,!0),disableRestoreFocus||(nodeToRestore.current&&nodeToRestore.current.focus&&nodeToRestore.current.focus(),nodeToRestore.current=null)}}},[disableAutoFocus,disableEnforceFocus,disableRestoreFocus,isEnabled,open]),React.createElement(React.Fragment,null,React.createElement("div",{tabIndex:0,ref:sentinelStart,"data-test":"sentinelStart"}),React.cloneElement(children,{ref:handleRef}),React.createElement("div",{tabIndex:0,ref:sentinelEnd,"data-test":"sentinelEnd"}))}void 0;export default Unstable_TrapFocus;